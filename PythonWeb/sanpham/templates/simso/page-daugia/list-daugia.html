{% extends "base.html" %}

{% block index %}
{% load static %}
{% load humanize %}
  <article>
    <!----from tim kiem--->
    {% include 'tim-kiem.html' %}
    <!--- end tim kiem-->

    <center>
        <img alt="Loading" src="/static/home/img/filter-loader.gif" name="loading_div" width="95" height="15" border="0" id="loading_div" style="display:none" />
    </center>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td valign="middle">
                <h1 style=" margin-bottom: 5px; ">Sim số đẹp</h1>
            </td>
            <td align="left" valign="middle"><img alt="Loading" src="/static/home/img/filter-loader.gif" name="img_filter" width="95" height="15" border="0" id="img_filter" style="display:none" />
            </td>
            <td width="127" align="right" valign="middle"></td>
        </tr>
    </table> <strong>Sim so dep</strong> giá rẻ các mạng Viettel, Mobi, Vina. Bán Sim số đẹp giá gốc, đăng ký thông tin chính chủ. Giao <u><i>sim số đẹp</i></u> miễn phí Toàn Quốc
    <br/>

    <div class="number_01 "><i class="spritestlvn sprite-vip"></i>
        <h2><a href="/" target="_blank">Danh Sách Sim Đấu Giá</a></h2> </div>
    <div class="wrapper">
      <div class="container-home">
        <div class="photo-grid clearfix">
            <ul class="clearfix">
              {% for daugia in daugia %}
                <li id="dau-gia">
                    <div style=" padding: 2px; ">
                        <div class="simcard">
                            <div class="nha-mang-{{ daugia.Sim.Mang| lower }} spritestlvn"></div>
                            <div class="so-sim-home">Sim đấu giá: {{ daugia.Sim.SoSim }}</div>
                            <div id="countdown{{forloop.counter}}" class="so-sim-home"></div>

                            

                            {% if daugia.DaDauGia %}
                              {% if daugia.NguoiDauGiaHienTai is None %}
                                <div class="so-sim-home">Chưa có người đấu giá</div>
                              {% else %}
                                <div class="so-sim-home">Người đã mua: {{ daugia.NguoiDauGiaHienTai }}</div>
                                <div class="so-sim-home">Với mức giá: {{ daugia.GiaHienTai|intcomma }}đ</div>
                              {% endif %}
                              <script>
                                document.getElementById("countdown{{forloop.counter}}").innerHTML = "Đấu giá đã kết thúc";
                                document.getElementById("countdown{{forloop.counter}}").style.color = "red";
                              </script>
                            {% else %}
                              <script>
                                var countDownDate{{forloop.counter}} = new Date({{ daugia.NgayHetHan|date:"U" }} * 1000);
                
                                var x = setInterval(function() {
                                  var now = new Date().getTime();
              
                                  var distance = countDownDate{{forloop.counter}} - now;
              
                                  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                                  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                                  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
              
                                  document.getElementById("countdown{{forloop.counter}}").innerHTML = "Thời gian: " + days + " Ngày " + hours + " Giờ "
                                      + minutes + " Phút " + seconds + " Giây ";
              
                                  document.getElementById("countdown{{forloop.counter}}").style.color = "blue";
              
                                  if (distance < 0) {
                                    clearInterval(x);
                                    document.getElementById("countdown{{forloop.counter}}").innerHTML = "Thời gian: Hết thời gian";
                                    document.getElementById("countdown{{forloop.counter}}").style.color = "red";
                                  }
                                }, 1000);
                              </script>
                              {% if daugia.GiaMuaLuon > daugia.GiaHienTai %}
                                <div class="so-sim-home">Giá mua luôn: {{ daugia.GiaMuaLuon|intcomma }}₫ </div>
                              {% endif %}
                              {% if daugia.NguoiDauGiaHienTai is None %}
                                <div class="so-sim-home">Chưa có người đấu giá</div>
                              {% else %}
                                <div class="so-sim-home">Người mua hiện tại: {{ daugia.NguoiDauGiaHienTai }}</div>
                                <div class="so-sim-home">Giá hiện tại: {{ daugia.GiaHienTai|intcomma }}đ</div>
                              {% endif %}
                              <a href="{% url 'DauGia:chitietdaugia' daugia.DuongDan %}">
                                <button type="submit" class="btn-mua" style="font-size: 18px;padding: 5px 10px;background: #F44336;">Đấu giá</button>
                              </a>
                            {% endif %}
                        </div>
                    </div>
                </li>
                
              {% endfor %}
            </ul>
          </div>
        <!-- /photo-grid -->
      </div>
    </div>
  </article>
  <div class="pagination" style="list-style-type:none;" align="center">
    {% if daugia.has_previous %}
        <a class="pagination-action" href="?page=1">&laquo;</a>
        <a class="pagination-action" href="?page={{ daugia.previous_page_number }}">&lsaquo;</a>
    {% endif %}
    {% for i in daugia.paginator.page_range %}
        {% if daugia.number == i %}
            <span class="pagination-number pagination-current">{{ i }} <span class="sr-only">(current)</span></span>
        {% else %}
            <a class="pagination-number" href="?page={{ i }}">{{ i }}</a>
        {% endif %}
    {% endfor %}
    {% if daugia.has_next %}
         <a class="pagination-action" href="?page={{ daugia.next_page_number }}">&rsaquo;</a>
         <a class="pagination-action" href="?page={{ daugia.paginator.num_pages }}">&raquo;</a>
    {% endif %}
</div>
<style>
  .pagination {
      text-align: center;
      margin-top: 1em;
  }

  .pagination-number {
      padding: 0.5em 0.8em;
      border-radius: 2px;
      color: #fff;
      border: solid 0.5px;
  }

  .pagination-number:hover, .pagination-current {
      background-color: #0080DA;
      border: solid 0.5px;
      padding: 0.5em 0.8em;
      border-radius: 2px;
  }

  .pagination-action {
      margin: 0 0.1em;
      display: inline-block;
      padding: 0.5em 0.5em;
      color: #0080DA;
      font-size: 1.3em;
  }

  .pagination-action:hover, .pagination-previous, .pagination-next {
      color: #0080DA;
  }
</style>
{% endblock %}